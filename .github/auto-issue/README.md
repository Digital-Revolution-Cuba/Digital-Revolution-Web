# üìã Issue Agent System

Este directorio contiene los archivos del sistema de gesti√≥n de issues **sin ejecuci√≥n autom√°tica**.

## üéØ Principio Fundamental

**El agente NO ejecuta comandos autom√°ticamente.** Solo genera scripts para revisi√≥n y ejecuci√≥n manual por humanos.

## üìÅ Estructura

```
.github/auto-issue/
‚îú‚îÄ‚îÄ deficiences.md      # Deficiencias fuente (input)
‚îú‚îÄ‚îÄ output.md           # Comandos gh issue create generados (output)
‚îú‚îÄ‚îÄ normalized.md       # Archivo legacy (no usado por el agente)
‚îú‚îÄ‚îÄ issues.json         # Archivo legacy (no usado por el agente)
‚îî‚îÄ‚îÄ README.md           # Esta documentaci√≥n
```

## üöÄ Flujo de Trabajo

### 1. Preparaci√≥n (Usuario)

Editar [deficiences.md](deficiences.md) con las deficiencias detectadas siguiendo el formato:

```markdown
1. T√≠tulo de la Deficiencia
   ‚ó¶ Deficiencia: Descripci√≥n del problema
   ‚ó¶ Argumento: Por qu√© es importante
   ‚ó¶ Soluci√≥n: Propuesta de implementaci√≥n
```

### 2. Invocaci√≥n (Usuario desde Copilot/Chat)

En GitHub Copilot o Chat, invocar con la frase:

```
crea las issues
```

### 3. Generaci√≥n (Agente)

El agente [issue-orchestrator](../.github/agents/issue-orchestrator.agent.md):

- Lee `deficiences.md`
- Genera comandos en `output.md`
- **NO ejecuta** ning√∫n comando

### 4. Revisi√≥n (Usuario)

Revisar el archivo [output.md](output.md) generado:

- Verificar t√≠tulos y labels
- Editar comandos si es necesario
- Validar formato de los issues

### 5. Ejecuci√≥n Manual (Usuario)

Ejecutar los comandos manualmente:

```bash
bash .github/auto-issue/output.md
```

### 6. Verificaci√≥n (Usuario)

- Ver issues creados en GitHub UI
- Verificar labels y contenido
- Ajustar si es necesario

## üö´ Restricciones

- ‚ùå **NO hay workflows autom√°ticos** (movidos a `.github/disabled/`)
- ‚ùå **NO hay scripts que se ejecuten en CI/CD**
- ‚ùå **NO hay triggers autom√°ticos** de ning√∫n tipo
- ‚úÖ **Solo invocaci√≥n manual** desde Copilot/Chat
- ‚úÖ **M√°ximo 20 issues** por ejecuci√≥n del agente

## üìã Formato del Output

El archivo `output.md` contiene comandos en formato:

```bash
#!/bin/bash
# Generated by issue-orchestrator agent

gh issue create \
  --title "[enhancement] T√≠tulo del issue" \
  --label "enhancement,severity:medium,needs-triage" \
  --body "## Descripci√≥n:
...
"
```

## üîß Labels Disponibles

Ver mapeo completo en [labels.yml](../.github/labels.yml):

**Tipos:**

- `bug` - Error o defecto
- `enhancement` - Nueva funcionalidad
- `security` - Vulnerabilidad o seguridad
- `performance` - Optimizaci√≥n de rendimiento
- `refactor` - Refactorizaci√≥n de c√≥digo
- `documentation` - Mejoras en documentaci√≥n

**Severidad:**

- `severity:critical` - Cr√≠tico
- `severity:high` - Alta
- `severity:medium` - Media
- `severity:low` - Baja

**Otros:**

- `needs-triage` - Requiere revisi√≥n inicial

## üìñ Archivos Legacy

Los siguientes archivos fueron **deshabilitados** y movidos a `.github/disabled/`:

- `auto-issues.yml` - Workflow de GitHub Actions (auto-ejecutaba issues)
- `create-issues.sh` - Script bash (auto-ejecutaba comandos gh)

Estos archivos se mantienen como referencia pero **NO deben usarse** en el flujo actual.
"body": "## Descripci√≥n:\n...\n\n## Resultado esperado:\n...\n\n## Resultado actual:\n...\n\n## Impacto en usuarios:\n...\n\n## Propuesta de soluci√≥n / pistas:\n..."
}

````

### Labels disponibles:
- `bug` - Errores o problemas de seguridad
- `enhancement` - Nuevas caracter√≠sticas
- `refactor` - Refactorizaci√≥n de c√≥digo
- `documentation` - Mejoras de documentaci√≥n
- `help wanted` - Se busca ayuda externa
- `good first issue` - Bueno para principiantes

## üîÑ Workflow de automatizaci√≥n

El workflow `.github/workflows/auto-issues.yml`:

- ‚úÖ Se activa autom√°ticamente cuando se modifica `issues.json` en `main`
- ‚úÖ Puede ejecutarse manualmente desde GitHub Actions
- ‚úÖ Evita duplicados verificando issues existentes
- ‚úÖ Genera un resumen de la ejecuci√≥n
- ‚úÖ Respeta rate limits con delays entre creaciones

## üéØ Proceso completo

```mermaid
graph LR
    A[deficiences.md] --> B[Normalizar]
    B --> C[normalized.md]
    C --> D[Convertir a JSON]
    D --> E[issues.json]
    E --> F[GitHub Actions]
    F --> G[Issues creados]
````

## ‚ö†Ô∏è Notas importantes

- Los issues **no se eliminan** autom√°ticamente, solo se crean
- El workflow **detecta duplicados** por t√≠tulo exacto
- Si un issue ya existe, se **salta autom√°ticamente**
- El token `GITHUB_TOKEN` tiene permisos suficientes (no requiere PAT)

## üîß Mantenimiento

Para actualizar la lista de issues:

1. Edita `issues.json` con los cambios necesarios
2. Commit y push
3. El workflow har√° el resto

Para agregar nuevas deficiencias desde cero:

1. Documenta en `deficiences.md`
2. Normaliza en `normalized.md`
3. Convierte a formato JSON en `issues.json`
4. Push los cambios
